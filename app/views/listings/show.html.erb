<div id="<%= dom_id @listing %>" class="flex flex-col gap-8">
  <%= render @listing %>

  <div class="flex flex-col gap-4">
    <h3 class="text-xl border-b border-black/30">Discusson</h3>

    <% if current_user %>
      <%= render "comments/form", comment: @listing.comments.build %>
    <% else %>
      <%= link_to "Sign in to comment!", auth_sign_in_path, class: "font-bold hover:underline" %>
    <% end %>

    <ol class="flex flex-col gap-4" id="<%= dom_id(@listing, :comments_for) %>" data-controller="reply">
      <%= render @listing.comments.order(created_at: :desc) %>
    </ol>
  </div>
</div>
